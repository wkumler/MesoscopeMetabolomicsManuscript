read_xls(sheet = "PCPN", skip = 1) %>%
slice(-1) %>%
distinct(station, cast=cast_num, depth=depth_sample) %>%
mutate(station=case_when(
station==16~"L1",
station==17~"L2",
TRUE~station
)) %>%
mutate(station=factor(station, levels=ms_station_levels)) %>%
mutate(cast=as.numeric(cast)) %>%
mutate(depth=as.numeric(depth))
dyhr_rna_spots <- "ms_raw_data/Dyhrman_MS_inventory_revis05132019.xlsx" %>%
read_xlsx(sheet = "MesoSCOPE 2017_RNA_samples") %>%
distinct(Cast) %>%
mutate(depth=15) %>% # CONFIRM THIS W DYHRMAN
mutate(station=str_extract(Cast, "(?<=S)\\d+|L\\d")) %>%
mutate(cast=str_extract(Cast, "(?<=C)\\d+")) %>%
drop_na() %>%
select(-Cast) %>%
mutate(cast=as.numeric(cast)) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels))
# Need cast info for John Lab things?
# Does this not exist because the TM rosette is different?
john_dTE_spots <- "ms_raw_data/John_MS_dissolvedTEs.xlsx" %>%
read_excel() %>%
distinct(station=Station, depth=`Depth (m)`) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels))
john_pTE_spots <- "ms_raw_data/John_MS_particulateTEs.xlsx" %>%
read_excel(skip = 2, col_names = FALSE) %>%
select(station=1, depth=2) %>%
mutate(station=str_remove(station, "station ")) %>%
mutate(station=case_when(
station=="cyclone" ~ "L1",
station=="anticyclone" ~ "L2",
station=="trichodesmium bloom" ~ NA_character_,
TRUE~station
)) %>%
drop_na() %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels))
karl_gop_spots <- "ms_raw_data/Karl_MS_18O-GOP.xlsx" %>%
read_xlsx(range = "C6:G49") %>%
fill(Station, Cast, .direction = "down") %>%
slice(-1) %>%
distinct(station=Station, cast=Cast, depth=Depth) %>%
mutate(cast=as.numeric(cast)) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels))
karl_chx_spots <- "ms_raw_data/Karl_MS_CH4-C2H4_prelim-1.xlsx" %>%
read_xlsx(range = "B6:I79") %>%
slice(-1) %>%
distinct(station=Station, cast=Cast, depth=Depth) %>%
mutate(cast=as.numeric(cast)) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels))
karl_datp_spots <- "ms_raw_data/Karl_MS_dATP.xlsx" %>%
read_excel(skip = 5) %>%
slice(-1) %>%
distinct(station=Station, cast=Cast, rosette=Niskin) %>%
mutate(station=factor(station, levels=ms_station_levels)) %>%
left_join(msbottledata) %>%
select(station, cast, rosette, depth)
karl_patp_spots <- "ms_raw_data/Karl_MS_pATP.xlsx" %>%
read_excel(skip = 5) %>%
slice(-1) %>%
distinct(station=Station, cast=Cast, rosette=Niskin) %>%
mutate(station=factor(station, levels=ms_station_levels)) %>%
left_join(msbottledata) %>%
select(station, cast, rosette, depth)
core_fcm_spots <- "ms_raw_data/Karl_MS_FCM_CountsOnly.xlsx" %>%
excel_sheets() %>%
map_dfr(function(sheetname){
if(sheetname%in%c("S8C2 49A-60A", "S9C3 61A-72A")){
sheetskip = 4
} else if(sheetname%in%c("L1-21-PP1A")) {
sheetskip = 2
} else {
sheetskip = 1
}
read_excel("ms_raw_data/Karl_MS_FCM_CountsOnly.xlsx",
skip = sheetskip, sheet= sheetname) %>%
distinct(station=`Stn*`, cast=`Cast*`, rosette=`Btl*`, depth=`Depth*`) %>%
mutate(station=factor(station, levels=ms_station_levels)) %>%
mutate(depth=ifelse(depth=="DCMiso", 110, depth))
}) %>%
suppressMessages()
karl_llp_spots <- "ms_raw_data/Karl_MS_LLP.xlsx" %>%
read_excel(skip = 5) %>%
slice(-1) %>%
distinct(station=Station, cast=Cast, rosette=Position, depth=Depth) %>%
mutate(cast=as.numeric(cast)) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels))
transect_profile_sheet <- "ms_raw_data/Karl_MS_Nutrient_Summary_KB.xlsx" %>%
read_excel(range = "KM1709 Transect, L1,L2 profiles!A4:N180") %>%
slice(-1:-2) %>%
mutate(sd=as.numeric(sd))
highres_sheet <- "ms_raw_data/Karl_MS_Nutrient_Summary_KB.xlsx" %>%
read_excel(range = "KM1709 High res nuts!A4:P53") %>%
slice(-1:-2)
diel_sheet <- "ms_raw_data/Karl_MS_Nutrient_Summary_KB.xlsx" %>%
read_excel(range = "KM1709 Diel nuts!A4:O76") %>%
slice(-1:-3)
karl_diss_spots <- bind_rows(transect_profile_sheet, highres_sheet, diel_sheet) %>%
distinct(station=Station, cast=Cast, rosette=Niskin, depth=Depth) %>%
mutate(cast=as.numeric(cast)) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels)) %>%
drop_na()
karl_ppo4_spots <- "ms_raw_data/Karl_MS_PPO4_WC.xlsx" %>%
read_excel(skip = 5) %>%
slice(-1) %>%
distinct(station=Station, cast=Cast, rosette=Position, depth=Depth) %>%
mutate(cast=as.numeric(cast)) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels))
# Incomplete: need cast/bottle numbers rather than just time
# Can't use distinct() for cyclone/anticyclone because
# they aren't distinguished by cast/bottle
transect_sheet <- "ms_raw_data/KM1709_lipid_concentrations.xlsx" %>%
read_excel(sheet = "Horizontal_transect") %>%
distinct(station=Station, depth=`Water depth (m)`) %>%
mutate(station=as.character(station))
cyclone_sheet <- "ms_raw_data/KM1709_lipid_concentrations.xlsx" %>%
read_excel(sheet = "L1_Cyclone_diel") %>%
select(station=Station, depth=`Water depth (m)`) %>%
mutate(station=as.character(station))
anti_sheet <- "ms_raw_data/KM1709_lipid_concentrations.xlsx" %>%
read_excel(sheet = "L2_Anticylone_diel", n_max = 37) %>%
select(station=Station, depth=`Water depth (m)`) %>%
mutate(station=as.character(station))
# Guessing at cast
vm_lipid_spots <- bind_rows(transect_sheet, cyclone_sheet, anti_sheet) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels)) %>%
mutate(cast=1)
white_chl_spots <- "ms_raw_data/White_MS_Fluorometric_Chlorophyll.txt" %>%
read.table(skip = 12, sep = "\t", header = TRUE) %>%
distinct(station=Station, cast=Cast, rosette=Nisken, depth=Depth) %>%
mutate(cast=as.numeric(cast)) %>%
mutate(depth=as.numeric(depth)) %>%
mutate(station=factor(station, levels=ms_station_levels))
ifcb_underway <- "ms_raw_data/all_features_with_TRUEclass.txt" %>%
read_csv() %>%
pull(Date) %>%
unique() %>%
map_dfr(function(time_i){
msbottledata %>% filter(abs(time-time_i)<60) %>% slice(1)
}) %>%
mutate(depth=0) %>%
select(station, cast, depth)
ing_metab_spots <- "ms_raw_data/file_metadata.csv" %>%
read_csv() %>%
filter(samp_type=="Smp") %>%
filter(cruise%in%c("MT", "MC")) %>%
distinct(station, cast, depth=abs_depth) %>%
mutate(station=factor(station, levels=ms_station_levels))
# Guessing at cast # here
delong_asv_spots_MT <- expand_grid(
station=factor(c(6, 12), levels = ms_station_levels),
depth=c(15, 110, 175),
cast=1
)
delong_asv_spots_MC <- "ms_raw_data/DeLong_MESOSCOPE_bacterial_metaTv2.xlsx" %>%
read_excel(sheet = "data") %>%
select(station=Station, cast=Cast, depth)
delong_asv_spots <- bind_rows(delong_asv_spots_MC, delong_asv_spots_MT)
# Guessing at cast # here
caron_asv_spots <- expand_grid(
station=factor(seq(4, 14, 2), levels = ms_station_levels),
depth=c(15, 110, 175, 500),
cast=1
)
msfull_df <- bind_rows(list(
core_chlpheo=core_chlpheo_spots,
core_pcpn=core_pcpn_spots,
core_fcm=core_fcm_spots,
dyhrman_rna=dyhr_rna_spots,
john_dTE=john_dTE_spots,
john_pTE=john_pTE_spots,
karl_gop=karl_gop_spots,
karl_chx=karl_chx_spots,
karl_datp=karl_datp_spots,
karl_patp=karl_patp_spots,
karl_llp=karl_llp_spots,
karl_nuts=karl_diss_spots,
karl_ppo4=karl_ppo4_spots,
vm_lipids=vm_lipid_spots,
white_chl=white_chl_spots,
ifcb_underway=ifcb_underway,
ing_metab=ing_metab_spots,
delong_asv=delong_asv_spots,
caron_asv=caron_asv_spots,
all_bottles=msbottledata %>% distinct(station, cast, time, lat, lon)
), .id = "lab") %>%
left_join(msbottledata %>% distinct(station, cast, time, lat, lon))
write.csv(msfull_df, "msfull_df.csv", row.names = FALSE)
ms_station_levels <- c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12",
"13", "14", "15", "L1", "L2")
msfull_df <- read_csv("msfull_df.csv") %>%
mutate(station=factor(station, levels=ms_station_levels))
# ggplot(msfull_df) +
#   geom_point(aes(x=station, y=-depth, color=lab))
ggplot(msfull_df) +
geom_point(aes(x=time, y=-depth, color=lab))
# ggplot(msfull_df) +
#   geom_point(aes(x=lat, y=-depth, color=lab))
plotly::ggplotly()
msfull_df
msbottledata %>% distinct(station, cast, time, lat, lon)
msfull_df <- bind_rows(list(
core_chlpheo=core_chlpheo_spots,
core_pcpn=core_pcpn_spots,
core_fcm=core_fcm_spots,
dyhrman_rna=dyhr_rna_spots,
john_dTE=john_dTE_spots,
john_pTE=john_pTE_spots,
karl_gop=karl_gop_spots,
karl_chx=karl_chx_spots,
karl_datp=karl_datp_spots,
karl_patp=karl_patp_spots,
karl_llp=karl_llp_spots,
karl_nuts=karl_diss_spots,
karl_ppo4=karl_ppo4_spots,
vm_lipids=vm_lipid_spots,
white_chl=white_chl_spots,
ifcb_underway=ifcb_underway,
ing_metab=ing_metab_spots,
delong_asv=delong_asv_spots,
caron_asv=caron_asv_spots
), .id = "lab") %>%
left_join(msbottledata %>% distinct(station, cast, time, lat, lon))
msfull_df
msfull_df <- bind_rows(list(
core_chlpheo=core_chlpheo_spots,
core_pcpn=core_pcpn_spots,
core_fcm=core_fcm_spots,
dyhrman_rna=dyhr_rna_spots,
john_dTE=john_dTE_spots,
john_pTE=john_pTE_spots,
karl_gop=karl_gop_spots,
karl_chx=karl_chx_spots,
karl_datp=karl_datp_spots,
karl_patp=karl_patp_spots,
karl_llp=karl_llp_spots,
karl_nuts=karl_diss_spots,
karl_ppo4=karl_ppo4_spots,
vm_lipids=vm_lipid_spots,
white_chl=white_chl_spots,
ifcb_underway=ifcb_underway,
ing_metab=ing_metab_spots,
delong_asv=delong_asv_spots,
caron_asv=caron_asv_spots
), .id = "lab") %>%
left_join(msbottledata %>% distinct(station, cast, time, lat, lon)) %>%
bind_rows(msbottledata %>% distinct(station, cast, time, lat, lon) %>% mutate(lab="all_bottles"))
write.csv(msfull_df, "msfull_df.csv", row.names = FALSE)
ms_station_levels <- c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12",
"13", "14", "15", "L1", "L2")
msfull_df <- read_csv("msfull_df.csv") %>%
mutate(station=factor(station, levels=ms_station_levels))
# ggplot(msfull_df) +
#   geom_point(aes(x=station, y=-depth, color=lab))
ggplot(msfull_df) +
geom_point(aes(x=time, y=-depth, color=lab))
# ggplot(msfull_df) +
#   geom_point(aes(x=lat, y=-depth, color=lab))
plotly::ggplotly()
msbottledata %>% distinct(station, cast, time, lat, lon)
msbottledata %>% distinct(station, cast, time, lat, lon) %>% mutate(lab="all_bottles")
head(msfull_df)
ms_station_levels <- c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12",
"13", "14", "15", "L1", "L2")
msfull_df <- read_csv("msfull_df.csv") %>%
mutate(station=factor(station, levels=ms_station_levels))
# ggplot(msfull_df) +
#   geom_point(aes(x=station, y=-depth, color=lab))
ggplot(msfull_df) +
geom_point(aes(x=time, y=-depth, color=lab))
# ggplot(msfull_df) +
#   geom_point(aes(x=lat, y=-depth, color=lab))
plotly::ggplotly()
msfull_df %>% filter(lab=="all_bottles")
msfull_df <- bind_rows(list(
core_chlpheo=core_chlpheo_spots,
core_pcpn=core_pcpn_spots,
core_fcm=core_fcm_spots,
dyhrman_rna=dyhr_rna_spots,
john_dTE=john_dTE_spots,
john_pTE=john_pTE_spots,
karl_gop=karl_gop_spots,
karl_chx=karl_chx_spots,
karl_datp=karl_datp_spots,
karl_patp=karl_patp_spots,
karl_llp=karl_llp_spots,
karl_nuts=karl_diss_spots,
karl_ppo4=karl_ppo4_spots,
vm_lipids=vm_lipid_spots,
white_chl=white_chl_spots,
ifcb_underway=ifcb_underway,
ing_metab=ing_metab_spots,
delong_asv=delong_asv_spots,
caron_asv=caron_asv_spots
), .id = "lab") %>%
left_join(msbottledata %>% distinct(station, cast, time, lat, lon)) %>%
bind_rows(msbottledata %>% distinct(station, cast, time, lat, lon, depth) %>% mutate(lab="all_bottles"))
write.csv(msfull_df, "msfull_df.csv", row.names = FALSE)
ms_station_levels <- c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12",
"13", "14", "15", "L1", "L2")
msfull_df <- read_csv("msfull_df.csv") %>%
mutate(station=factor(station, levels=ms_station_levels))
# ggplot(msfull_df) +
#   geom_point(aes(x=station, y=-depth, color=lab))
ggplot(msfull_df) +
geom_point(aes(x=time, y=-depth, color=lab))
# ggplot(msfull_df) +
#   geom_point(aes(x=lat, y=-depth, color=lab))
plotly::ggplotly()
fkbottledata <- final_full %>%
filter(cruise=="Falkor") %>%
distinct(station, cast, rosette, pressure, time, lat, lon) %>%
mutate(depth=pressure) %>%
mutate(station=factor(station, levels=unique(station)))
fk_station_levels <- levels(fkbottledata$station)
church_amoA_TOC_TN_spots <- "fk_raw_data/Church_FK_fieldsamples_amoA_ddPCR_May19.xlsx" %>%
read_excel(skip = 1) %>%
mutate(station=as.numeric(str_extract(Station, "\\d+$"))) %>%
mutate(cast=1) %>%
mutate(bottle=str_extract(Niskin, "^\\d+")) %>%
mutate(depth=as.numeric(str_extract(`Depth (m)`, "^\\d+"))) %>%
select(station, cast, bottle, depth) %>%
drop_na() %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
church_nh4_spots <- "fk_raw_data/Church_FK_NH4.xlsx" %>%
read_excel() %>%
distinct(station=`Station#`, cast=`Cast#`, depth=`Depth (m)`) %>%
mutate(station=as.character(station), cast=as.numeric(cast), depth=as.numeric(depth))
church_nox_spots <- "fk_raw_data/Church_FK_NO3_NO2.xlsx" %>%
read_excel() %>%
distinct(station=`Station#`, cast=`Cast#`, depth=`Depth (m)`)  %>%
mutate(station=as.character(station), cast=as.numeric(cast), depth=as.numeric(depth))
delong_afvg_spots <- "fk_raw_data/DeLong_FK_Virus_AFVG_sampling.xlsx" %>%
read_excel(skip = 8) %>%
mutate(bottle=str_extract(`Bottle(s)`, "\\d+")) %>%
select(station=Station, cast=Cast, bottle, depth=`Depth (m)`) %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
dyhr_rna_spots <- "fk_raw_data/Dyhrman_FK_inventory_revis05132019.xlsx" %>%
read_excel(skip = 1, sheet = "Metatranscriptomes") %>%
slice(-1) %>%
distinct(station=station, cast=cast_num, bottle=rosette_position, depth=depth_sample) %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth)) %>%
mutate(depth=ifelse(is.na(depth), 110, depth))
karl_gop_spots <- "fk_raw_data/Karl_FK_18O-GOP.xlsx" %>%
read_excel(range = "B5:F24") %>%
slice(-1) %>%
fill(Date, Station) %>%
mutate(date=as.Date(as.numeric(Date), origin="1899-12-30")) %>%
mutate(cast=1) %>%
select(station=Station, cast, depth=Depth) %>%
mutate(station=as.character(station), cast=as.numeric(cast), depth=as.numeric(depth))
karl_chx_spots <- "fk_raw_data/Karl_FK_CH4-C2H4_prelim-1.xlsx" %>%
read_excel(range = "B7:I44") %>%
slice(-1) %>%
select(station=Station, cast=Cast, bottle=Niskin, depth=Depth) %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
karl_chl_spots <- "fk_raw_data/Karl_FK_Chlorophyll.xlsx" %>%
read_excel(range = "B20:L135") %>%
slice(-1) %>%
select(station=Station, cast=Cast, bottle=Bottle, depth=Depth) %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
karl_fcm_spots <- "fk_raw_data/Karl_FK_FCM-FINAL-EMS-2019_0320.xlsx" %>%
read_excel(skip = 2, sheet = "Simple Export") %>%
distinct(station=Station, cast=Cast, bottle=Bottle, depth=`...7`) %>%
drop_na() %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
karl_nuts_spots <- "fk_raw_data/Karl_FK_Nutrients_Final.xlsx" %>%
read_excel(skip = 3) %>%
select(depth=`Depth`, sample=`Sample ID`) %>%
filter(!depth=="Depth") %>%
mutate(bottle=as.numeric(str_extract(sample, "\\d+$"))) %>%
mutate(sample=ifelse(startsWith(sample, "FK"), sample, NA)) %>%
fill(sample) %>%
mutate(station=str_extract(sample, "(?<=FK 180310[- ])\\d+")) %>%
mutate(cast=str_extract(sample, "(?<=FK 180310[- ]\\d{1,2}-)\\d+")) %>%
select(station, cast, bottle, depth) %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
karl_PCPN_spots <- "fk_raw_data/Karl_FK_PCPN_WC_current.xlsx" %>%
read_excel(skip = 1) %>%
slice(-(1:2)) %>%
mutate(station=str_extract(Name, "(?<=FK-)\\d+")) %>%
mutate(cast=str_extract(Name, "(?<=FK-\\d{1,2}-)\\d+")) %>%
mutate(bottle=str_extract(Name, "\\d+$")) %>%
distinct(station, cast, bottle, depth=`Depth (m)`) %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
karl_ppo4_spots <- "fk_raw_data/Karl_FK_PPO4_WC.xls" %>%
read_excel(skip = 1, sheet = "FK180310 WC Final Data") %>%
slice(-1) %>%
distinct(station=Station, cast=Cast, bottle=Position, depth=Depth) %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
karl_TDNP_spots <- "fk_raw_data/Karl_FK_TDN_TDP.xlsx" %>%
read_excel(skip = 1, sheet = "Summary") %>%
distinct(Sample, depth=`Depth (m)...3`) %>%
drop_na() %>%
mutate(station=str_extract(Sample, "(?<=FK180310-)\\d+")) %>%
mutate(cast=1) %>%
mutate(bottle=str_extract(Sample, "\\d+$")) %>%
mutate(station=as.character(station), cast=as.numeric(cast), bottle=as.numeric(bottle),
depth=as.numeric(depth))
ing_metab_spots <- "fk_raw_data/file_metadata.csv" %>%
read.csv() %>%
filter(cruise=="FK") %>%
filter(samp_type=="Smp") %>%
distinct(station, cast, depth=abs_depth) %>%
mutate(station=as.character(station), cast=as.numeric(cast), depth=as.numeric(depth))
caron_asv_spots <- expand_grid(station=c(62, 77), cast=1, depth=c(25, 100, 150, 250)) %>%
mutate(station=as.character(station), cast=as.numeric(cast), depth=as.numeric(depth))
white_ifcb_spots <- "fk_raw_data/IFCB_FALKOR_Cast.txt" %>%
read.table(row.names = NULL) %>%
setNames(c("Depth", "Date", "Time", "Station", "File")) %>%
mutate(cast=1) %>%
mutate(time=strptime(paste(Date, Time), format="%F %X", tz="HST")) %>%
mutate(depth=ifelse(Depth=="DCM", 110, as.numeric(Depth))) %>%
distinct(station=Station, cast, depth) %>%
mutate(station=as.character(station), cast=as.numeric(cast), depth=as.numeric(depth))
white_ifcb_underway <- "fk_raw_data/all_features_plus_pmt.txt" %>%
read_csv() %>%
pull(Date) %>%
unique() %>%
map_dfr(function(time_i){
fkbottledata %>% filter(abs(time-time_i)<60) %>% slice(1)
}) %>%
mutate(depth=0) %>%
select(station, cast, depth) %>%
mutate(station=as.character(station), cast=as.numeric(cast), depth=as.numeric(depth))
fkfull_df <- bind_rows(list(
church_amoA_TOC_TN=church_amoA_TOC_TN_spots,
church_nh4 = church_nh4_spots,
church_nox = church_nox_spots,
delong_afvg = delong_afvg_spots,
dyhrman_metat = dyhr_rna_spots,
karl_gop = karl_gop_spots,
karl_chx = karl_chx_spots,
karl_chl = karl_chl_spots,
karl_fcm = karl_fcm_spots,
karl_nuts = karl_nuts_spots,
karl_PCPN = karl_PCPN_spots,
karl_ppo4 = karl_ppo4_spots,
karl_TDNP = karl_TDNP_spots,
ing_metab = ing_metab_spots,
caron_asv = caron_asv_spots,
white_ifcb_discrete = white_ifcb_spots,
white_ifcb_underway = white_ifcb_underway,
all_bottles = fkbottledata %>% distinct(station, cast, time, lat, lon, depth)
), .id = "lab") %>%
left_join(fkbottledata %>% distinct(station, cast, time, lat, lon))
write.csv(fkfull_df, "fkfull_df.csv", row.names = FALSE)
fkfull_df <- read_csv("fkfull_df.csv") %>%
mutate(station=factor(station)) %>%
filter(depth < 275)
ggplot(fkfull_df) +
geom_point(aes(x=station, y=-depth, color=lab))
ggplot(fkfull_df) +
geom_point(aes(x=time, y=-depth, color=lab))
ggplot(fkfull_df) +
geom_point(aes(x=lat, y=-depth, color=lab))
plotly::ggplotly()
fkfull_df <- bind_rows(list(
church_amoA_TOC_TN=church_amoA_TOC_TN_spots,
church_nh4 = church_nh4_spots,
church_nox = church_nox_spots,
delong_afvg = delong_afvg_spots,
dyhrman_metat = dyhr_rna_spots,
karl_gop = karl_gop_spots,
karl_chx = karl_chx_spots,
karl_chl = karl_chl_spots,
karl_fcm = karl_fcm_spots,
karl_nuts = karl_nuts_spots,
karl_PCPN = karl_PCPN_spots,
karl_ppo4 = karl_ppo4_spots,
karl_TDNP = karl_TDNP_spots,
ing_metab = ing_metab_spots,
caron_asv = caron_asv_spots,
white_ifcb_discrete = white_ifcb_spots,
white_ifcb_underway = white_ifcb_underway
), .id = "lab") %>%
left_join(fkbottledata %>% distinct(station, cast, time, lat, lon)) %>%
bind_rows(fkbottledata %>% distinct(station, cast, time, lat, lon, depth) %>% mutate(lab="all_bottles"))
write.csv(fkfull_df, "fkfull_df.csv", row.names = FALSE)
fkfull_df <- read_csv("fkfull_df.csv") %>%
mutate(station=factor(station)) %>%
filter(depth < 275)
ggplot(fkfull_df) +
geom_point(aes(x=station, y=-depth, color=lab))
ggplot(fkfull_df) +
geom_point(aes(x=time, y=-depth, color=lab))
ggplot(fkfull_df) +
geom_point(aes(x=lat, y=-depth, color=lab))
plotly::ggplotly()
shiny::runApp('metadata_for_scope_collab/mswebapp')
runApp('metadata_for_scope_collab/mswebapp')
runApp('metadata_for_scope_collab/mswebapp')
